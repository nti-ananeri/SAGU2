<?php

/**
 *
 * This file handles the connection and actions for sprInscription table
 *
 * @author Jamiel Spezia [jamiel@solis.coop.br]
 *
 * $version: $Id$
 *
 * \b Maintainers \n
 * Alexandre Heitor Schmidt [alexsmith@solis.coop.br]
 * Daniel Afonso Heisler [daniel@solis.coop.br]
 * Jamiel Spezia [jamiel@solis.coop.br]
 * William Prigol Lopes [william@solis.coop.br]
 * 
 * @since
 * Class created on 05/09/2005
 *
 * \b @organization \n
 * SOLIS - Cooperativa de Soluções Livres \n
 * The Sagu2 development team
 *
 * \b Copyleft \n
 * Copyleft (L) 2005 - SOLIS - Cooperativa de Soluções Livres \n
 *
 * \b License \n
 * Licensed under GPL (for further details read the COPYING file or http://www.gnu.org/copyleft/gpl.html )
 *
 * \b History \n
 * See history in CVS repository: http://sagu.solis.coop.br   
 *
 **/

/**
 * Grid used by form to display search results
 **/
class GrdListInscriptionByCourseSearch extends MGrid
{
    /**
     * Class constructor
     **/
    function __construct($filters)
    {
        $MIOLO  = MIOLO::getInstance();
        $module = MIOLO::getCurrentModule();
        $home   = MIOLO::getCurrentAction();
        $optionReport = unserialize($filters->returnData);
        
        $columns = array( new MGridColumn( _M('Data Inscr',  $module), 'center', true, null, true, null, false ),
                          new MGridColumn( null ),
                          new MGridColumn( null ),
                          new MGridColumn( _M('Person id',   $module), 'right',  true, null, true, null, false ),
                          new MGridColumn( _M('Person name', $module), 'left',   true, null, true, null, false ),
                          new MGridColumn( null ),
                          new MGridColumn( null ),
                          new MGridColumn( null ),
                          new MGridColumn( null ),
                          new MGridColumn( null ),
                          new MGridColumn( null ),
                          new MGridColumn( null ),
                          new MGridColumn( null ),
                          new MGridColumn( null ),
                          new MGridColumn( null ),
                          new MGridColumn( null ),
                          new MGridColumn( null ),
                          new MGridColumn( _M('Residential phone', $module), 'left', true, null, true, null, false ),
                          new MGridColumn( _M('Work phone',        $module), 'left', true, null, true, null, false ),
                          new MGridColumn( _M('Cell phone',        $module), 'left', true, null, true, null, false ),
                          new MGridColumn( null ),
                          new MGridColumn( null ),
                          new MGridColumn( null ),
                          new MGridColumn( null ),
                          new MGridColumn( _M('Email', $module), 'left', true, null, true, null, false ),
                          new MGridColumn( _M('Contract', $module), 'center', true, null, true, null, false ),
                          new MGridColumn( _M('Class', $module), 'center', true, null, true, null, false ),
                          new MGridColumn( _M('Data Contrato', $module), 'center', true, null, true, null, false )
                          
                        );
    
        // this foreach is necessary until the getActionURL function is
        // able to handle an object parameter
        foreach ( $filters as $k => $v )
        {
            if ($k == 'returnData')
            {
                $v = urlencode($v);
            }
            $opts[$k] = $v;
        }
        $url = $MIOLO->getActionURL($module, "$home:search", null, $opts);
        parent::__construct( null, $columns, $url, 0, 0, 'GrdListInscriptionByCourseSearch' );
        $this->setIsScrollable();
        $this->eventHandler();
    }
}
?>
