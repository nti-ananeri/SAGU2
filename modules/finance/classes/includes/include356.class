<?php

class bank356 extends boletoFunctions 
{
    var $nossoNumero;
    var $codigoBarras;
    var $linhaDigitavel;
    var $carteira;
    var $dvCodigoBanco;

    public function __construct ( $data )
    {
        $codigoBanco = '356';
        $codigoMoeda = '9';
        $fatorVencimento = $this->fator_vencimento($data->maturityDate);
        $valorDocumento = $this->formata_numero($data->invoiceValue,10,0,"valor");

        $this->carteira = $data->wallet;
        $this->dvCodigoBanco = $this->geraCodigoBanco($codigoBanco);
        $data->nossoNumero  = $this->formata_numero($data->bankInvoiceId, 13, 0, "valor");
        $data->branch       = $this->formata_numero($data->branchNumber, 4, 0, "valor");
        $data->account      = $this->formata_numero($data->accountNumber, 7, 0, "valor");
		$campoLivre  = $data->branch;
        $campoLivre .= $data->account;
        $campoLivre .= $this->modulo_10($data->nossoNumero.$data->branch.$data->account);
        $campoLivre .= $data->nossoNumero;
        
        $dvGeral = $this->digitoVerificador_barra("$codigoBanco$codigoMoeda$fatorVencimento$valorDocumento$campoLivre");

        $this->codigoBarras = "$codigoBanco$codigoMoeda$dvGeral$fatorVencimento$valorDocumento$campoLivre";
        $this->linhaDigitavel       =   $this->monta_linha_digitavel($this->codigoBarras);
        $this->nossoNumero          =   $data->nossoNumero;
        $this->agenciaCodigoCedente =   $data->branchNumber . " / " . $data->accountNumber . '-' . $data->accountNumberDigit;
    }
}
?>
