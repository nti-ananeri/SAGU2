<?
/**
*
* @author Giovani Murilo Dantas Correa [gmurilo@isolution.inf.br]
*
* $version: $Id$
*
* \b Maintainers \n
* Daniel Afonso Heisler [daniel@isolution.inf.br]
*
* @since
* Class created on 25/03/2009
*
* \b Organization: \n
* iSolution - Soluções de Internet \n
* The iSolution TEAM
*
* \b CopyLeft: \n
* CopyLeft (L) 2007 iSolution - Soluções de Internet \n
*
* \b License \n
* Licensed under GPL (for further details read the COPYING file or http://www.gnu.org/copyleft/gpl.html )
*
* \b History \n
* See history in CVS repository: http://isolution.inf.br   
*
**/
set_time_limit(0);        
$MIOLO = MIOLO::getInstance();
$module = 'academic';

$MIOLO->getClass('academic', 'RptGradesAndAbsenceRoster');

class  RptGradesAndAbsenceRosterInLot extends  RptGradesAndAbsenceRoster
{
    var $module = 'academic';

    public function __construct($filters = NULL)
    {
        $MIOLO = MIOLO::getInstance();

        $this->title = strtoupper(_M('Grades and absence roster report','academic'));
        PDF::__construct();
        foreach($filters as $item => $value)
        {
            $this->filters->{$item} = $value;
        }
        $this->useUserInfo = false;
        $this->generatePDF();
        PDF::generatePDF(); 
    }

    public function generatePDF()
    {
        $MIOLO = MIOLO::getInstance();
        $busGroup = $MIOLO->getBusiness('academic', 'BusGroup');
        $groupx = $busGroup->getGroup($this->filters->groupId);
        $data->learningPeriodId = $groupx->learningPeriodId;
        $data->isSubstitutive = DB_FALSE;
        $busDegree = $MIOLO->getBusiness('academic', 'BusDegree');
        $degrees = $busDegree->searchDegree($data);
        $y = 0;
        foreach ($degrees as $id => $value )
        {
            $this->filters->degreeNumber = $value[9];
            $this->degree->degreeDescription = $value[6];
            $this->addPage('P', 'mm', 'A4');
            $this->aliasNbPages();   
            parent::generatePDF();
        }
    }
}
?>
